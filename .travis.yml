# THIS IS A ADJUSTMENT OF https://github.com/levilime/ContextProject-Danshal/blob/master/.travis.yml
# ALL CREDDITS GO TO THE ORIGINAL CREATOR https://github.com/levilime

notifications:
 slack: tud-contextproject-16:AfNBwAAvnAJEeptKiBmnnhlc

language: java

before_script:
- java -cp src/main/goal/nl/tudelft/ti2806/contextvh-1.0.1*.jar login.Login $email $password

script:
 # run the Goal Test with a 60s timeout
 - timeout 60 java -cp com.github.goalhub.runtime.jar-with-dependencies_*.jar goal.tools.Run src/test/goal/nl/tudelft/ti2806/test.test2g -v > log.txt || echo 0
 # run the Percepts Test with a 60s timeout
 # print the test output
 - cat log.txt
 # if there is a test failed then the build fails
 - grep "test failed:" log.txt && $? || echo 0
 # check that the tests actually passed otherwise the build still fails
 - grep "test passed:" log.txt && echo 0 || $?

jdk:
 - oraclejdk8